---
title: "International Severe Acute Respiratory and Emerging Infections Consortium (ISARIC)"
output:
  html_document:
    df_print: paged
    number_sections: yes
    toc: yes
    toc_depth: 2
    toc_float:
      collapsed: no
  pdf_document:
    toc: yes
    toc_depth: '2'
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)

library(tidyverse)
library(glue)
library(gridExtra)

# file locations

paths <- read_csv("paths.csv", col_names = F)

code.path <- paths[[which(paths$X1 == "code.path"), 2]]
data.path <- paths[[which(paths$X1 == "data.path"), 2]]
data.dict.file <- paths[[which(paths$X1 == "data.dict.file"), 2]]
site.list.file <- paths[[which(paths$X1 == "site.list.file"), 2]]
uk.data.file <- paths[[which(paths$X1 == "uk.data.file"), 2]]
row.data.file <- paths[[which(paths$X1 == "row.data.file"), 2]]
eot.data.file <- paths[[which(paths$X1 == "eot.data.file"), 2]]



# Source files

source(glue("{code.path}/shared.R"))
source(glue("{code.path}/output.R"))

```

<!-- <p style="font-family: times, serif; font-size:24pt> **International Severe Acute Respiratory and Emerging Infections Consortium (ISARIC)**</p> -->

<!-- <f style="font-family: times, serif; font-size:11pt; font-style:italic"> - A global federation of clinical research networks, providing a proficient, coordinated, and agile research response to outbreak-prone infectious diseases</f> -->


<f style="font-family: times, serif; font-size:11pt; font-style:italic"> - A global federation of clinical research networks, providing a proficient, coordinated, and agile research response to outbreak-prone infectious diseases</f>

# COVID-19 Report: 23rd March, 2020 {-}



# Summary

The results in this report have been produced using data from the International Severe Acute Respiratory and Emerging Infection Consortium (ISARIC) COVID-19 database up to 19 March 2020. These data were contributed by **`r de$N.sites`** sites across **`r de$N.countries`** countries.

To date, data have been entered for **`r de$N.cases`** patients. 

The cohort is made up of `r de$N.males` males and `r de$N.females` females - sex is unreported for `r de$N.sex.unknown` cases. 

The median age (calculated based on reported ages) is `r de$median.age` years. The minimum and maximum observed ages in this cohort are `r de$min.age`  and `r de$max.age` years respectively. 

Outcomes have been recorded for `r de$N.outcomes` patients, consisting of `r de$N.recoveries` recoveries and `r de$N.deaths` deaths. Follow-up is ongoing for `r de$N.censored` patients.

For this cohort, the expected mean for the time from admission to any outcome is `r de$mean.adm.to.outcome` days (95% CI: `r de$adm.outcome.lower`, `r de$adm.outcome.upper`), accounting for censorship, i.e. unobserved outcomes. The observed mean is `r  obs.adm.outcome.mean` days, with a standard deviation of `r  obs.adm.outcome.sd` 

The number of days from (first) symptom onset to hospital admission has an expected mean of `r de$mean.onset.to.adm`(95% CI: `r de$mean.onset.to.adm.lower`, `r de$mean.onset.to.adm.upper`) and a standard deviation of  `r obs.onset.to.adm.sd` days.  For the same variable, the observed mean and standard deviation are `r  obs.adm.outcome.mean` (95% CI: `r  obs.adm.outcome.mean.lower`,`r  obs.adm.outcome.mean.upper`) days and `r  obs.adm.outcome.sd` days respectively. 

Using only completed outcomes, the case fatality ratio (CFR) was estimated as `r de$hfr` (95% CI: `r de$hfr.lower`, `r de$hfr.upper`). When cases with unobserved outcomes are taken into consideration, the CFR estimate is  `r de$cfr` (95% CI: `r de$cfr.lower`, `r de$cfr.upper`).  

Of `r de$n.treat` patients with completed details of treatments received `r de$p.none`% of patients did not receive any antimicrobial treatments or steroids. `r de$p.abx`% received an antibiotic and `r de$p.av`% received antivirals.




# Patient Characteristics


**Figure 1**: Age and sex distribution of patients. Bar fills are outcome (death/discharge/censored) at the time of report.

```{r agepyramid, echo = FALSE}

age.pyramid(patient.data)

```

**Figure 2**: Top: The distribution of combinations of the four most common symptoms seen at admission, across all patients for whom this data was recorded. Filled and empty circles below the x-axis indiciate the presence or absence of each symptoms. Bottom: Frequency of each symptom in the patient population.

```{r symptomcombos, echo=FALSE, out.width= "100%", fig.height=3}

symptoms.upset(patient.data, 4)
symptom.prevalence(patient.data)

```


**Figure 3**:  Top: The distribution of combinations of the four most common comorbidities seen at admission, across all patients for whom this data was recorded. Filled and empty circles below the x-axis indiciate the presence or absence of each comorbidity. Bottom: Frequency of each comorbidity in the patient population.

```{r comorbcombos, echo=FALSE, out.width= "100%", fig.height=3}

comorbidities.upset(patient.data, 4)
comorbidity.prevalence(patient.data)

```

**Figure 4**: The distribution of patient status by number days after admission. "Transferred" patients were moved to another institution, where their final outcome cannot be determined. Patients with censored outcomes at the time of this report remain in the "Admitted" category. 

```{r outcome.curve, out.width= "80%"}

  
status.by.time.after.admission(patient.data)
```

**Figure 5**: Distribution of length of hospital stay by 19/03/2020, according to patient sex. The hospital stay function is either time to death or recovery or time to censorship.

```{r stay.by.sex, out.width= "80%"}
violin.sex.func(patient.data)



```

**Figure 6**: Distribution of length of hospital stay by 19/03/2020, according to patient age group. The hospital stay function considers the time to death, recovery or censorship.

```{r  stay.by.age, out.width= "80%"}

violin.age.func(patient.data)
```


**Figure 7**: Estimated hospital fatality ratio based on patients with complete outcome data, showing changes to estimate over time. Shaded area represents 95% confidence interval. Methods from Wu *et al.*(2020).

```{r out.width= "80%"}

hospital.fatality.ratio(patient.data)$plt

```

**Figure 8**: Patient outcomes by epidemiological week (of 2020) of admission

```{r recruitment3, echo=FALSE}

outcomes.by.admission.date(patient.data)
```


# Treatment

**Figure 9**: Treatments used on all patients where this information was recorded

```{r treatment1, echo=FALSE}
treatment.use.plot(patient.data)
```


**Figure 10**: The distribution of combinations of antimicrobial treatments and steroids administed during hospital stay, across all patients for whom this data was recorded. Filled and empty circles below the x-axis indiciate the presence or absence of each symptoms.

```{r treatment2, echo=FALSE}
treatment.upset(patient.data)$p
```


# Statistical Analysis

Blue curves show the Gamma distribution fit to two time-dependent data variables. 


**Figure 11**: Distribution of time from symptom onset to admission.

```{r onset.admission, out.width = '80%'}

onset.adm.func(patient.data)$plt

```


**Figure 12**: Distribution of time from admission to an outcome - either death or recovery.


```{r  adm.outcome, out.width = '80%'}

adm.outcome.func(patient.data)$plt

```



**Figure 13**: Nonparametric probabilites for death (red curve) and  recovery (blue curve) over time. The case  fatality ratio (black) is based on the cumulative incidence function of deaths and recoveries so far. For a completed epidemic,
the curves for death and recovery meet. Estimates were derived using a nonparametric Kaplan-Meierâ€“based method proposed by Ghani *et al.* (2005).


```{r outcomelines}

modified.km.plot(patient.data)

```


# Country Comparisons

**Figure 14**: Number of sites per country

```{r recruitment1, echo=FALSE}

sites.by.country(patient.data)

```

**Figure 15**: Distribution of patients by country and outcome

```{r recruitment2, echo=FALSE}

outcomes.by.country(patient.data)

```




# Background


In response to the emergence of novel coronavirus (COVID-19), ISARIC launched a portfolio of resources to accelerate outbreak research and response. All resources are designed to address the most critical public health questions, have undergone extensive review by international clinical experts, and are free for all to use. Resources are available on the [ISARIC website](https://isaric.tghn.org/).

The [ISARIC-WHO COVID-19 Case Record Form (CRF)](https://media.tghn.org/medialibrary/2020/03/ISARIC_COVID-19_CRF_V1.3_24Feb2020.pdf) enables the collection of standardised clinical data to inform patient management and the public health response. These forms should be used to collect data on suspected or confirmed cases of COVID-19.

Following the launch of this this open resource, ISARIC received a massive response from the health and research communities. This form is now in use across dozens of countries and research consortia, aligning the collection of health data. The form is available in multiple languages. Data can be entered electronically to the data platform as below. ISARIC supports researchers to retain control of the data and samples they collect. All decisions regarding data use are made by the institutions that enter the data. We keep our contributors informed of any plans and welcome their input to ensure that we are generating the best science and promoting the interests of your patients, your institutions and your public health authorities. Feedback and suggestions are welcome anytime at [ncov@isaric.org](ncov@isaric.org)

To support the rapid implementation of standardised data collection and reporting, ISARIC hosts a data platform that includes an electronic data capture system, a secure repository and an analytic framework. Data are entered to a web-based [REDCap](https://www.project-redcap.org/) data management system, securely stored, and used to inform regular reports as above. Data contributors are invited to input on the methods and contents of the reports, and are provided with the R code to execute analysis on their own data in the platform. For more information, visit the [ISARIC](https://isaric.tghn.org/covid-19-clinical-research-resources/) website.




# Methods

Patient details were submitted electronically by participating sites to the ISARIC database.  Relevant background and presenting symptoms were recorded on the day of study recruitment.  Daily follow-up was then completed until recovery or death.  A final form was completed with details of treatments received and outcomes. All categories that represent fewer than five individuals have been suppressed to avoid the potential for identification of participants. 

Graphs have been used to represent the age distribution of patience by sex and status (censored, death, recovered), the prevalence of individual symptoms  - and combinations of them - on admission, the prevalence of individual comorbidities  - and combinations of them - on admission, the length of hospital stay by sex and age group and the distribution of patient statuses by time since admission. In addition, the number of cases recruited by country and site, as well as the case count by status, has been represented.

Using a non-parametric Kaplan-Meier-based method (Ghani *et al.*, 2005), the case- fatality ratio (CFR) was estimated, as well as probabilities for death and recovery. This method estimates the CFR with the formula $a/(a+b)$, where $a$ and $b$ are the values of the cumulative incidence function for deaths and recoveries respectively, estimated at the last observed time point. In a competing risk context (i.e. where there are multiple endpoints),  the cumulative incidence function for an endpoint is equal to the product of the hazard function for that endpoint and the survival function assuming a composite endpoint. It is worth noting that this method assumes that future deaths and recoveries will occur with the same relative probabilities as have been observed so far. Binomial confidence intervals for the CFR were obtained by a normal approximation (See Ghani *et al.*, (2005)).

<!-- Another CFR estimation method, which uses observed outcomes only, was employed in this analysis. For this method, the CFR is calculated as the ratio of deaths to the sum of deaths and recoveries until the reference point (Wu *et al.*, 2020). Over time, the uncertainty around the estimate decreases due to an increase in completed outcomes. Exact binomial confidence intervals are plotted along with the risk estimate at each time point.  -->

To obtain estimates for the distributions of time from symptom onset to hospital admission and the time from admission to outcome (death or recovery), Gamma distributions were fitted to the observed data, accounting for censorship. Parameters were estimated by a maximum likelihood procedure and confidence intervals for the means and variances were obtained by bootstrap.  

All analysis were performed using the R statistical software (R Core Team, 2019).



# Caveats

## Caveat to all data

Patient data is collected and uploaded from start of admission, however a complete patient data set is not available until the episode of care is complete. This causes a predictable lag in available data influenced by the duration of admission which is greatest for the sickest patients, and accentuated during the up-phase of the outbreak.


## Caveat to UK data

In the UK, up to 10th March 2020, people with positive swabs were admitted to hospital as part of the containment strategy. Many of these people had recently been abroad, particularly Italy. Since 11th March 2020, admission is mostly based upon need for treatment of COVID-19 disease. This may explain the younger age of the UK group and the fewer comorbidities reported when compared with reports from China and Italy.



# ISARIC Team Members

* Gail Carson
* Emmanuelle A. Dankwa
* AnneMarie Docherty 
* Christl A. Donnelly
* Christophe Fraser
* Matthew Hall
* Peter Horby
* Kalynn Kennon
* James Lee
* Laura Merson
* Sarah Moore
* Piero Olliaro
* Daniel Plotkin
* Mark Pritchard
* Calum Semple 





# References

1.	A. C. Ghani, C. A. Donnelly, D. R. Cox, J. T. Griffin, C. Fraser, T. H. Lam, L. M. Ho, W. S. Chan, R. M. Anderson, A. J. Hedley, G. M. Leung (2005).  Methods for Estimating the Case Fatality Ratio for a Novel, Emerging Infectious Disease, American Journal of Epidemiology, 162(5), 479 - 486. [doi:10.1093/aje/kwi230](https://doi.org/10.1093/aje/kwi230).

2.	R Core Team (2019). R: A language and environment for statistical computing. R Foundation for Statistical Computing, Vienna, Austria.

3.	Wu Peng, Hao Xinxin, Lau Eric H Y, Wong Jessica Y, Leung Kathy S M, Wu Joseph T, Cowling Benjamin J, Leung Gabriel M. Real-time tentative assessment of the epidemiological characteristics of novel coronavirus infections in Wuhan, China, as at 22 January 2020 (2020). Euro Surveill., 25(3):pii=2000044. [doi:10.2807/1560-7917.ES.2020.25.3.2000044](https://doi.org/10.2807/1560-7917.ES.2020.25.3.2000044).






